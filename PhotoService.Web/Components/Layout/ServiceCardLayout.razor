@using PhotoService.BLL.Models.OutputModels
@using PhotoService.BLL.IRepositories
@using PhotoService.BLL
@* Card ---*@
@foreach (var i in _service)
{
    <ServiceCardTemplate Id="@i.Id" Cloce="@ToggleModal2"></ServiceCardTemplate>
}

<InfoServiceModalTamplate Id="@Id" modalClass="@ModalClass" Cloce="@ToggleModal" displayMode="@DisplayMode"></InfoServiceModalTamplate>

@code {

    // Open modal
    bool open = false;
    string ModalClass = "modal fade";
    string DisplayMode = "none";

    private void ToggleModal2(int id)
    {
        Id = id;
        open = !open;
        ModalClass = open ? "modal fade show" : "modal fade";
        DisplayMode = open ? "block" : "none";
        StateHasChanged();
    }

    private void ToggleModal()
    {
        open = !open;
        ModalClass = open ? "modal fade show" : "modal fade";
        DisplayMode = open ? "block" : "none";
        StateHasChanged();
    }

    [Parameter] public int Id { get; set; } = 1;

    private string _name;
    private string _description;
    private string _executorName;
    private int _rating;
    private int _cost;

    private List<ServiceOutputModel> _service;
    private IServiceRepositories _serviceRepositories;

    public ServiceCardLayout()
    {
        _serviceRepositories = new ServiceMock();
    }

    protected override void OnInitialized()
    {
        _service = _serviceRepositories.GetAllServices();
    }

}